<!DOCTYPE html>
<html style="height:100%;margin:0px;padding:0px">
<head>
	<title>Math 120R Navigator</title>
</head>
<body style="width:100%;height:100%">
	
<div class="container" style="width:100%;height:100%;">
	<h2 class="title">Math 120R Navigator</h2>
	<select name="notes" id="notes">
		
	</select>
		
		<iframe class="frame" id="iframe" frameborder="0" src="" style="width:100%;height:100%"></iframe>

	<button class="carousel-control prev" id="previous" title="Go to previous item">
		<svg viewBox="0 0 256 512">
			<path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z" />
		</svg>
	</button>

	<button class="carousel-control next" id="next" title="Go to next item">
		<svg viewBox="0 0 256 512">
			<path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z" />
		</svg>
	</button>
	
</div>

</body>
<script type="text/javascript">

	let nextButton = document.getElementById("next");
	let previousButton = document.getElementById("previous");
	let iframeElement=document.getElementById("iframe");
	let notesDropdownElement=document.getElementById("notes");
	let fileIndex = 0;
	let files=[
		"Chapter5/Introduction5.3.1",
		"Chapter5/Introduction5.3.2",
		"Chapter5/Introduction5.3.3",
		"Chapter5/Example5.3.1",
		"Chapter5/Example5.3.2"
	]

	function loadSourceFile(src){
		iframeElement.src=`https://cwpersonrennell.github.io/Math/Math120R/${src}.html`;
	}

	function loadHash(){
		let url = new URL(document.URL);
		let target = url.hash;
		if(target.length==0)
			target = files[0];
		else
			target=target.replace("#","");
		loadSourceFile(target);
	}

	function init(){
		for(let i =0; i <files.length;i++){
			//let anchor = document.createElement('a');
			//anchor.href=`#${files[i]}`;
			let option = document.createElement('option');
			option.value=files[i];
			option.innerText=files[i];
			//option.appendChild(anchor);
			notesDropdownElement.appendChild(option);
		}
		loadHash();
	}

	function advanceToNextFile(){
		fileIndex++;
		if(fileIndex>files.length-1){
			fileIndex--;
		}
		loadSourceFile(files[fileIndex]);
	}

	function advanceToPreviousFile(){
		fileIndex--;
		if(fileIndex<0){
			fileIndex=0;
		}
		loadSourceFile(files[fileIndex]);
	}

	function selectFromDropDown(){
		let url = new URL(document.URL);
		url.hash = notesDropdownElement.value;
		window.history.pushState({},'',url);
		loadHash();

	}
	nextButton.addEventListener("mouseup",advanceToNextFile);
	previousButton.addEventListener("mouseup",advanceToPreviousFile);
	document.addEventListener("DOMContentLoaded",init);
	document.addEventListener("hashchange",loadHash);
	notesDropdownElement.addEventListener("change",selectFromDropDown)

</script>
</html>