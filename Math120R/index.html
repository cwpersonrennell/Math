<!DOCTYPE html>
<html style="height:100%;margin:0px;padding:0px">
<head>
	<title>Math 120R Navigator</title>
	<link rel="stylesheet" href="https://cwpersonrennell.github.io/Math/Math120R/style.css">
	<script src="https://cwpersonrennell.github.io/Math/iframeResizer.min.js"></script>
</head>
<body style="width:100%;height:100%">
	
<div class="container" style="width:100%;height:100%;">
	<div id = "nav" class="nav">
		<h2 class="title">Math 120R Navigator</h2>
		<label for="exam">Exam Content</label><select name="exam" id="exam"></select>
		<label for="chapter">Chapter</label><select name="chapter" id="chapter"></select>
		<label for="section">Section</label><select name="section" id="section"></select>
		<label for="notes">Notes</label><select name="notes" id="notes"></select>
	</div>
		<iframe class="frame" id="iframe" frameborder="0" src="" style="width:100%;height:100%"></iframe>

	<button class="carousel-control prev" id="previous" title="Go to previous item">
		<svg viewBox="0 0 256 512">
			<path d="M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z" />
		</svg>
	</button>

	<button class="carousel-control next" id="next" title="Go to next item">
		<svg viewBox="0 0 256 512">
			<path d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z" />
		</svg>
	</button>
	
</div>

</body>
<script type="text/javascript">
	iFrameResize({log:false},"#iframe");
	function splitOnCaps(s){
		return s.split(/(?=[A-Z])/).join(" ");
	}
	const Exams = {
		"Exam 1":{
		//Exam 1
			2:{
				2.1:["ExampleEvaluatingAFunction","ExampleDomainRestrictionsPart1","ExamplesDomainRestrictionsPart2","ExampleDifferenceQuotient"],
				2.2:["ExampleDomainRangeVisuallyGraphically","ExampleEquationsAsFunctions","ExampleGraphingPiecewiseFunctions"],
				2.3:["ExampleAppliedTucsonRain","ExampleAppliedEnergyAndVelocity","ExampleIncreasingDecreasingPositiveNegativeGraph","ExampleWhereIsAFunctionPositive"],
				2.4:["ExampleAverageRateOfChange","ExampleAverageRateOfChangeNumerical","ExampleAverageRateOfChangeVariable","ExampleNetChangeAndAverageRateOfChange"],
				2.6:["NotesFunctionTransformationsRefresher","ExampleApplyingTransformationsToAPoint","ExampleInterpretingTransformationsIntoEnglish","ExampleTransformingTrigFunction"],
				2.7:["NotesEvenVsOdd","ExampleAlgebraicCombintionsOfFunctions","ExampleUsingAGraphToCalculateAlgebraicCombinationsOfFunctions","ExampleUsingTablesForCombiningFunctions"]
			},
			1:{
				1.5:[],
				1.8:[],
				1.9:[],
				1.10:[]
			},
		},
		//Exam 2
		"Exam 2":{

		},
		//Exam 3
		"Exam 3":{

		},
		//Exam 4
		"Exam 4":{

		}};

	function buildSelection(selection,options){
		selection.replaceChildren();
		for(let i = 0; i <options.length;i++){
			let option = document.createElement('option');
			option.value = options[i];
			option.innerText = options[i];
			selection.appendChild(option);
		}
	}

	const examDropdownElement=document.getElementById("exam");
	const chapterDropdownElement=document.getElementById("chapter");
	const sectionDropdownElement=document.getElementById("section");
	const notesDropdownElement=document.getElementById("notes");

	let examChoices    =["---"].concat(Object.keys(Exams));
	let chapterChoices =["---"];
	let sectionChoices =["---"];
	let notesChoices   =["---"];

	buildSelection(examDropdownElement,examChoices);
	buildSelection(chapterDropdownElement,chapterChoices);
	buildSelection(sectionDropdownElement,sectionChoices);
	buildSelection(notesDropdownElement,notesChoices);
	
	function updateChapters(){
		if(examDropdownElement.selectedIndex>0){
			buildSelection(chapterDropdownElement,["---"].concat(
				Object.keys(
					Exams[examDropdownElement.value])
				));
		}
		else{
			buildSelection(chapterDropdownElement,["---"]);
			buildSelection(sectionDropdownElement,["---"]);
			buildSelection(notesDropdownElement,["---"]);
		}
	}

	examDropdownElement.addEventListener("change",updateChapters);

	function updateSection(){
		if(chapterDropdownElement.selectedIndex>0){
			buildSelection(sectionDropdownElement,["---"].concat(
				Object.keys(
					Exams[examDropdownElement.value][chapterDropdownElement.value]
					)
				));
		}else{
			buildSelection(sectionDropdownElement,["---"]);
			buildSelection(notesDropdownElement,["---"]);
		}
	}

	chapterDropdownElement.addEventListener("change",updateSection);
	let files=[];

	function updateNotes(){
		if(sectionDropdownElement.selectedIndex>0){
			buildSelection(notesDropdownElement,["---"].concat(
				Exams[examDropdownElement.value][chapterDropdownElement.value][sectionDropdownElement.value].map(splitOnCaps)));
			files = Exams[examDropdownElement.value][chapterDropdownElement.value][sectionDropdownElement.value];
		}else{
			buildSelection(notesDropdownElement,["---"]);
			files=[];
		}
	}

	sectionDropdownElement.addEventListener("change",updateNotes);

	let nextButton = document.getElementById("next");
	let previousButton = document.getElementById("previous");
	let iframeElement=document.getElementById("iframe");
	let fileIndex = 0;
	

	function loadSourceFile(src){
		//src = `Chapter${chapterDropdownElement.value}/${sectionDropdownElement.value}/${src}`;
		iframeElement.src=`https://cwpersonrennell.github.io/Math/Math120R/${src}.html`;
	}

	function loadHash(){
		let url = new URL(document.URL);
		let target = url.hash;
		if(target.length==0)return;
		target=target.replace("#","");
		loadSourceFile(target);
	}

	function advanceToNextFile(){
		if(files.length == 0) return;
		fileIndex++;
		if(fileIndex>files.length-1){
			fileIndex--;
		}
		loadSourceFile(files[fileIndex]);
	}

	function advanceToPreviousFile(){
		if(files.length == 0) return;
		fileIndex--;
		if(fileIndex<0){
			fileIndex=0;
		}
		loadSourceFile(files[fileIndex]);
	}

	function selectFromDropDown(){
		let url = new URL(document.URL);
		let note = notesDropdownElement.value.replaceAll(" ","");
		url.hash = `Chapter${chapterDropdownElement.value}/${sectionDropdownElement.value}/${note}`;
		window.history.pushState({},'',url);
		loadHash();

	}

	nextButton.addEventListener("mouseup",advanceToNextFile);
	previousButton.addEventListener("mouseup",advanceToPreviousFile);
	document.addEventListener("DOMContentLoaded",loadHash);
	document.addEventListener("hashchange",loadHash);
	
	function loadNote(){
		if(notesDropdownElement.selectedIndex>0){
			selectFromDropDown();
		}
	}
	notesDropdownElement.addEventListener("change",selectFromDropDown)

</script>
</html>